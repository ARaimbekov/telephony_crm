{% extends "base.html" %}
{% load tailwind_filters %}
{% load crispy_forms_tags %}

{% block content %}

<div class="max-w-lg mx-auto">
    <a class="hover:text-blue-500" href="{% url 'leads:lead-list' %}">Вернуться к таблице</a>
    <div class="py-5 border-t border-gray-200">
        <h1 class="text-4xl text-gray-800">Создание новой позиции</h1>
    </div>
    <form method="post" class="mt-5">
        {% csrf_token %}
        <!-- {{ form|crispy }} -->
        <!-- {{ form.phone_number }} -->
        <div id="div_id_atc_number" class="mb-3"> <label for="id_atc_number"
                class="block text-gray-700 text-sm font-bold mb-2">
                Номер atc </label>
            <div class="mb-3">
                <div class="relative">
                    <select
                        class="border border-red-500 bg-white focus:outline-none border border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none leading-normal text-gray-700"
                        name="atc" hx-get="{% url 'leads:phones' %}" hx-trigger="change" hx-target="#phones">

                        <option selected>Выберите номер</option>

                        {% for atc in atcs %}
                        <option value="{{atc.pk}}">{{ atc.name }}</option>
                        {% endfor %}
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                            <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <div id="phones">
            {% include 'leads/phones.html' %}
        </div>

        {{ form|crispy }}

        <button type='submit' class="w-full text-white bg-blue-500 hover:bg-blue-600 px-3 py-2 rounded-md">
            Готово
        </button>
    </form>
</div>


{% endblock content %}